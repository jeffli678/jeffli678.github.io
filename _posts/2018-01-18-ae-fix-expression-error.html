---
layout: post
status: publish
published: true
title: AE表达式错误解决方法
author:
  display_name: Part3
  login: root
  email: jeffli6789@gmail.com
  url: ''
author_login: root
author_email: jeffli6789@gmail.com
wordpress_id: 72
wordpress_url: http://blog.part3.me/?p=72
date: '2018-01-18 19:10:52 +0800'
date_gmt: '2018-01-19 00:10:52 +0800'
categories:
- 'null'
tags: []
comments: []
---
<p>套用国外网站的AE模板时，经常会遇到表达式错误的问题。原因并不复杂，AE表达式中可能会引用一些图层的属性，外国人在制作模板时，使用的是英文版AE，自然会引用英文属性。当我们在中文版AE上打开模板时，这时只有中文版的属性，就会发生错误。</p>
<p><!--more--></p>
<p>解决的方法也很简单，首先分析一下问题的具体原因。打卡AE模板后，提示表达式错误：</p>
<p style="text-align: center;">合成"Color_Mountains_03"中图层1（"COLOR"）的颜色（行1），类"Effect"中名为"Color"的属性或方法缺失或不存在。</p>
<p><img class="aligncenter size-full wp-image-73" src="https://blog.part3.me/wp-content/uploads/2018/01/1-1.png" alt="" width="1149" height="614" /></p>
<p>首先找到名叫Color_Mountains_03的图层（可以在左侧面板搜索），然后定位到图层1（"COLOR")，接着找到出问题的&ldquo;颜色&rdquo;表达式。如下图所示，点击左边下拉按钮将其展开，可以看到表达式的内容，中间黄底惊叹号表示其中确实有问题。</p>
<p><img class="aligncenter size-full wp-image-74" src="https://blog.part3.me/wp-content/uploads/2018/01/2-1.png" alt="" width="1347" height="417" /></p>
<p style="text-align: center;">comp("Final Render HD1080").layer("Color Control").effect("Mountains_05")("Color")</p>
<p>表达式的内容并不复杂，comp是composition的缩写，表示合成，layer表示图层，effect是效果。连起来，就是当前表达式的值，等于合成"Final Render HD1080"的图层"Color Control"的效果"Mountains_05"的"Color"值。再看错误提示，说这个"Color"不存在，那我们就去看看Final Render HD1080 --> Color Control -->&nbsp;Mountains_05 --> Color 中间哪一环除了问题。</p>
<p><img class="aligncenter size-full wp-image-75" src="https://blog.part3.me/wp-content/uploads/2018/01/3-1.png" alt="" width="961" height="450" /></p>
<p>依次找到相关的合成，图层和属性之后，我们发现在中文版的AE中，该属性的名字叫&ldquo;颜色&rdquo;，而不是"Color"。所以解决最初的表达式错误的方法就是将最后的"Color"改为&ldquo;颜色&rdquo;，也就是：</p>
<p style="text-align: center;">comp("Final Render HD1080").layer("Color Control").effect("Mountains_05")("颜色")</p>
<p>修改之后错误书由9个降为8个，说明这个错误已经消失了。按照此方法将几个错误修改就可以了。</p>
<p>上面的描述尽可能详细，但还是有点绕。需要注意的是，图层1的名字虽然叫COLOR，但是与我们修改的Color并无关系。首先AE表达式区分大小写，而且错误是出在属性，不是图层。最迷惑人的地方是图二和图三里面都有&ldquo;颜色&rdquo;这个属性，但他们也毫无联系。简单来说，如果两个名称不一样，我们要改成图三里面的名称。图二的颜色是一个&ldquo;COLOR&rdquo;图层的属性，并没有在表达式中被引用，所以错误也与它没有关系。</p>
<p>按照AE的逻辑，任何东西链接到表达式表示将它赋值为表达式的值。所以这个表达式的作用其实是使得&ldquo;COLOR&rdquo;图层的&ldquo;颜色&rdquo;等于&ldquo;Color Control&rdquo;图层的属性&ldquo;Mountains_05&rdquo;的颜色。那我们为什么要大费周折的给图层的颜色做一个这样的&ldquo;链接&rdquo;，而不是直接设置图层的颜色呢？</p>
<p>这是一个设计理念的问题。从结果上来说，两种方式都一样。但按照当前模板的方式进行设计，可以将需要调整的属性全部集中起来，方便使用者修改。否则面对一个陌生的模板去寻找各种设置的位置，将是很复杂的事情。换句话说，我们在&ldquo;Color Control&rdquo;图层中就可以修改大部分常用的设置，比如背景颜色等等，而不需要去具体的合成中定位相应的属性。</p>
<p>不过问题并没有完全解决，这里我们只遇到9个错误，有的模板会有上百个错误，这样一个一个修改肯定不是办法。于是就有了另一种办法，与其修改图二中的表达式，不如直接修改中文版AE中的属性名，把图三中的&ldquo;颜色&rdquo;改成&ldquo;Color&rdquo;。就这个模板来说，因为所有错误都和颜色有关，只修改这一个地方就可解决全部9个问题。</p>
<p>AE界面上显示的文字都保存在语言文件里，只要对其进行修改就可以达到目的。</p>
<p>CC 2017 路径：C:\Program Files\Adobe\Adobe After Effects CC 2017\Support Files\zdictionaries\zh_CN\after_effects_zh-CN.dat</p>
<p>CC 2018路径：&nbsp;C:\Program Files\Adobe\Adobe After Effects CC 2018\Support Files\Dictionaries\zh_CN\after_effects_zh-CN.dat</p>
<p>每个版本的路径都未必一样，如果不在上述位置，在Support Files文件夹里搜索after_effects_zh应该就能找到。</p>
<p>用记事本打开后，搜索Slider_Control即可迅速定位到需要修改的地方。然后参照下图修改7个地方就可以解决大部分表达式错误问题。</p>
<p><img class="aligncenter size-full wp-image-88" src="https://blog.part3.me/wp-content/uploads/2018/01/6f37970a304e251f1027d116a286c9177e3e530a.jpg" alt="" width="465" height="387" /></p>
<p>可以直接复制下面7个英文单词：</p>
<p>Slider&nbsp; &nbsp;Angle&nbsp; &nbsp;Checkbox&nbsp; &nbsp;Color&nbsp; &nbsp;Point&nbsp; &nbsp;Layer&nbsp; &nbsp;3DPoint</p>
<p>需要注意的是，这种方法并不能解决所有错误，有些还是需要按照前面的方法手工处理。</p>
<p>网上也有可以自动修复表达式错误的工具（<a href="https://aescripts.com/expressionuniversalizer/" target="_blank" rel="noopener">ExpressionUniversalizer 3官网</a>，<a href="http://www.lookae.com/universalizer3/" target="_blank" rel="noopener">LookAE下载</a>），不知道可靠性如何。</p>
<p>&nbsp;</p>
